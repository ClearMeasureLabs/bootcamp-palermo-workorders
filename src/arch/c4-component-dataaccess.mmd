%% C4 Component Diagram - DataAccess project
%% References: Core only

C4Component
    title Component Diagram - DataAccess

    Container_Boundary(dataaccess, "DataAccess") {
        Component(mappings, "Mappings", "EF Core", "DataContext, WorkOrderMap, EmployeeMap, RoleMap, EntityMapBase")
        Component(handlers, "Handlers", "MediatR", "WorkOrderQueryHandler, EmployeeQueryHandler, StateCommandHandler, ForecastQueryHandler, WorkOrderSearchHandler, TelemetryHandler")
        Component(messaging, "Messaging", "NServiceBus", "DistributedBus, MessagingConventions, WebServiceMessage")
        Component(health, "Health", "HealthChecks", "CanConnectToDatabaseHealthCheck, HealthCheckRemotableRequestHandler")
    }

    ContainerDb(db, "SQL Server / SQLite", "Database", "")

    Rel(mappings, db, "EF Core")
    Rel(handlers, mappings, "Uses DataContext")
    Rel(handlers, mappings, "DataContext")
    Rel(messaging, handlers, "Dispatches")
    Rel(health, db, "Checks connection")
