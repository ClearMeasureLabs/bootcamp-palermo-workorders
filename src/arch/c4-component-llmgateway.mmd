%% C4 Component Diagram - LlmGateway project
%% References: Core only

C4Component
    title Component Diagram - LlmGateway

    Container_Boundary(llmgateway, "LlmGateway") {
        Component(workorder_chat, "WorkOrderChatHandler", "MediatR", "WorkOrderChatQuery handler")
        Component(workorder_tool, "WorkOrderTool", "AI tool", "Tool for LLM")
        Component(chat_factory, "ChatClientFactory", "Azure/Ollama", "IChatClient")
        Component(tracing_client, "TracingChatClient", "Wrapping", "Telemetry")
        Component(config, "ChatClientConfig, ChatClientConfigQuery", "Config", "LLM endpoint")
        Component(health, "CanConnectToLlmServerHealthCheck", "Health", "LLM connectivity")
    }

    System_Ext(openai, "Azure OpenAI / Ollama", "HTTP", "")

    Rel(workorder_chat, workorder_tool, "Uses")
    Rel(workorder_chat, chat_factory, "Uses")
    Rel(chat_factory, tracing_client, "Wraps")
    Rel(tracing_client, openai, "HTTP")
    Rel(health, openai, "Probes")
