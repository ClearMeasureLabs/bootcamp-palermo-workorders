%% C4 Component Diagram - UI.Server project
%% References: Core, DataAccess, UI.Client, UI.Api, LlmGateway, ChurchBulletin.ServiceDefaults

C4Component
    title Component Diagram - UI.Server

    Container_Boundary(ui_server, "UI.Server") {
        Component(program, "Program", "Entry point", "Host builder, Lamar")
        Component(registry, "UIServiceRegistry", "Lamar", "DI registration")
        Component(controllers, "Controllers", "SingleApiController", "REST API")
        Component(agents, "AI Agents", "WorkOrderReformatAgent, AutoReformatAgentService", "LLM")
        Component(health, "HealthChecks", "Is64BitProcessHealthCheck", "Aggregation")
        Component(config, "DatabaseConfiguration", "IDatabaseConfiguration", "Connection string")
        Component(chat_config_handler, "ChatClientConfigQueryHandler", "MediatR", "LLM config")
    }

    Rel(program, registry, "Uses")
    Rel(registry, controllers, "Registers")
    Rel(registry, agents, "Registers")
    Rel(registry, config, "Registers")
    Rel(controllers, registry, "IBus from Core")
    Rel(agents, registry, "LlmGateway")
