<?plantuml 1.2026.1?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="419px" preserveAspectRatio="none" style="width:1494px;height:419px;background:#FFFFFF;" version="1.1" viewBox="0 0 1494 419" width="1494px" zoomAndPan="magnify"><title>SaveDraftCommand Sequence</title><defs/><g><rect fill="#FFFFFF" height="370.3516" style="stroke:#000000;stroke-width:0.5;" width="584.6934" x="643.8633" y="43.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="136.5127" x="867.9536" y="55.3638">Command Pipeline</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="75.416" x="898.502" y="69.5684">[container]</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="239.1074" x="626.9395" y="27.9951">SaveDraftCommand Sequence</text><g><title>..person..</title><rect fill="#000000" fill-opacity="0.00000" height="269.6875" width="8" x="36.4082" y="137.9609"/><line style="stroke:#666666;stroke-width:0.5;stroke-dasharray:5,5;" x1="39.9082" x2="39.9082" y1="137.9609" y2="407.6484"/></g><g><title>..component..</title><rect fill="#000000" fill-opacity="0.00000" height="269.6875" width="8" x="176.2539" y="137.9609"/><line style="stroke:#666666;stroke-width:0.5;stroke-dasharray:5,5;" x1="179.7539" x2="179.7539" y1="137.9609" y2="407.6484"/></g><g><title>..component..</title><rect fill="#000000" fill-opacity="0.00000" height="269.6875" width="8" x="380.0605" y="137.9609"/><line style="stroke:#666666;stroke-width:0.5;stroke-dasharray:5,5;" x1="383.5605" x2="383.5605" y1="137.9609" y2="407.6484"/></g><g><title>..component..</title><rect fill="#000000" fill-opacity="0.00000" height="269.6875" width="8" x="583.8672" y="137.9609"/><line style="stroke:#666666;stroke-width:0.5;stroke-dasharray:5,5;" x1="587.3672" x2="587.3672" y1="137.9609" y2="407.6484"/></g><g><title>..component..</title><rect fill="#000000" fill-opacity="0.00000" height="269.6875" width="8" x="741.3125" y="137.9609"/><line style="stroke:#666666;stroke-width:0.5;stroke-dasharray:5,5;" x1="744.8125" x2="744.8125" y1="137.9609" y2="407.6484"/></g><g><title>..component..</title><rect fill="#000000" fill-opacity="0.00000" height="269.6875" width="8" x="986.4746" y="137.9609"/><line style="stroke:#666666;stroke-width:0.5;stroke-dasharray:5,5;" x1="989.9746" x2="989.9746" y1="137.9609" y2="407.6484"/></g><g><title>..component..</title><rect fill="#000000" fill-opacity="0.00000" height="269.6875" width="8" x="1164.627" y="137.9609"/><line style="stroke:#666666;stroke-width:0.5;stroke-dasharray:5,5;" x1="1168.127" x2="1168.127" y1="137.9609" y2="407.6484"/></g><g><title>..container..</title><rect fill="#000000" fill-opacity="0.00000" height="269.6875" width="8" x="1363.2715" y="137.9609"/><line style="stroke:#666666;stroke-width:0.5;stroke-dasharray:5,5;" x1="1366.7715" x2="1366.7715" y1="137.9609" y2="407.6484"/></g><rect fill="#0D437B" height="46.5938" rx="2.5" ry="2.5" style="stroke:#0D437B;stroke-width:2;" width="69.8164" x="5" y="90.3672"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="55.8164" x="12" y="108.5059">&#171;person&#187;</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="41.2578" x="19.2793" y="126.1875">User</text><rect fill="#85BBF0" height="60.5625" rx="2.5" ry="2.5" style="stroke:#78A8D9;stroke-width:2;" width="189.875" x="84.8164" y="76.3984"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="82.5703" x="138.4688" y="94.5371">&#171;component&#187;</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="175.875" x="91.8164" y="112.2188">SingleApiController</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="64.8516" x="147.3281" y="127.1309">[UI.Server]</text><rect fill="#85BBF0" height="60.5625" rx="2.5" ry="2.5" style="stroke:#78A8D9;stroke-width:2;" width="103.7109" x="331.7051" y="76.3984"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="82.5703" x="342.2754" y="94.5371">&#171;component&#187;</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="89.7109" x="338.7051" y="112.2188">Bus : IBus</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="64.8516" x="351.1348" y="127.1309">[UI.Server]</text><rect fill="#85BBF0" height="60.5625" rx="2.5" ry="2.5" style="stroke:#78A8D9;stroke-width:2;" width="100.9922" x="536.8711" y="76.3984"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="82.5703" x="546.082" y="94.5371">&#171;component&#187;</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="86.9922" x="543.8711" y="112.2188">IMediator</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="58.4473" x="558.1436" y="127.1309">[MediatR]</text><rect fill="#85BBF0" height="60.5625" rx="2.5" ry="2.5" style="stroke:#78A8D9;stroke-width:2;" width="193.8984" x="647.8633" y="76.3984"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="82.5703" x="703.5273" y="94.5371">&#171;component&#187;</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="179.8984" x="654.8633" y="112.2188">SaveDraftCommand</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="71.0391" x="709.293" y="127.1309">[Command]</text><rect fill="#85BBF0" height="60.5625" rx="2.5" ry="2.5" style="stroke:#78A8D9;stroke-width:2;" width="223.4453" x="878.252" y="76.3984"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="82.5703" x="948.6895" y="94.5371">&#171;component&#187;</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="209.4453" x="885.252" y="112.2188">StateCommandHandler</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="56.6133" x="961.668" y="127.1309">[Handler]</text><rect fill="#85BBF0" height="60.5625" rx="2.5" ry="2.5" style="stroke:#78A8D9;stroke-width:2;" width="112.8594" x="1111.6973" y="76.3984"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="82.5703" x="1126.8418" y="94.5371">&#171;component&#187;</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="98.8594" x="1118.6973" y="112.2188">WorkOrder</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="55.9277" x="1140.1631" y="127.1309">[Domain]</text><rect fill="#438DD4" height="60.5625" rx="2.5" ry="2.5" style="stroke:#3E82C5;stroke-width:2;" width="244.4297" x="1244.5566" y="76.3984"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="71.543" x="1331" y="94.5371">&#171;container&#187;</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="230.4297" x="1251.5566" y="112.2188">DataContext / SQL Server</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="117" x="1308.2715" y="127.1309">[Database:EF Core]</text><polygon fill="#666666" points="167.7539,161.9297,177.7539,165.9297,167.7539,169.9297,171.7539,165.9297" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="39.9082" x2="173.7539" y1="165.9297" y2="165.9297"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="30.9434" x="74.5078" y="161.0996">User</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="4.1777" x="105.4512" y="161.0996">&#160;</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="35.5254" x="109.6289" y="161.0996">input</text><polygon fill="#666666" points="371.5605,189.8984,381.5605,193.8984,371.5605,197.8984,375.5605,193.8984" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="179.7539" x2="377.5605" y1="193.8984" y2="193.8984"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="179.8066" x="191.7539" y="189.0684">Send(SaveDraftCommand)</text><polygon fill="#666666" points="575.3672,217.8672,585.3672,221.8672,575.3672,225.8672,579.3672,221.8672" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="383.5605" x2="581.3672" y1="221.8672" y2="221.8672"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="179.8066" x="395.5605" y="217.0371">Send(SaveDraftCommand)</text><polygon fill="#666666" points="977.9746,245.8359,987.9746,249.8359,977.9746,253.8359,981.9746,249.8359" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="587.3672" x2="983.9746" y1="249.8359" y2="249.8359"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="194.6602" x="691.3408" y="245.0059">Handle(StateCommandBase)</text><polygon fill="#666666" points="755.8125,273.8047,745.8125,277.8047,755.8125,281.8047,751.8125,277.8047" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="749.8125" x2="988.9746" y1="277.8047" y2="277.8047"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="221.1621" x="756.8125" y="272.9746">Execute(StateCommandContext)</text><polygon fill="#666666" points="1156.127,315.7422,1166.127,319.7422,1156.127,323.7422,1160.127,319.7422" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="744.8125" x2="1162.127" y1="319.7422" y2="319.7422"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="187.207" x="862.8662" y="300.9434">ChangeStatus(CurrentUser,</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="35.1211" x="916.6113" y="314.9121">date,</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="4.1777" x="951.7324" y="314.9121">&#160;</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="40.418" x="955.9102" y="314.9121">Draft)</text><polygon fill="#666666" points="1354.7715,343.7109,1364.7715,347.7109,1354.7715,351.7109,1358.7715,347.7109" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="989.9746" x2="1360.7715" y1="347.7109" y2="347.7109"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="141.4395" x="1107.6533" y="342.8809">SaveChangesAsync()</text><polygon fill="#666666" points="598.3672,385.6484,588.3672,389.6484,598.3672,393.6484,594.3672,389.6484" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="592.3672" x2="988.9746" y1="389.6484" y2="389.6484"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="146.5547" x="715.3936" y="370.8496">StateCommandResult</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="38.8184" x="769.2617" y="384.8184">[Save]</text><?plantuml-src pPLTRzem58RlyolSZ8iWeVMB3bgDIP1I5QajZ1Jr4ZdnWKPrxCnEElZtEtQI4LhMzcPjpGME_HxxEUzndBrKqML22QThcMT49v1HGPszM4GyPq2---rzlpqFu5SE8e8VZZDB6SrWo241aGNPceFdwhNE875Rf14kVScbwdqvfDyw8RGQ2ocoSkZ2jbOZb8g1gdIT4w2qrT3tbCdViLZst0Nb6bmxb49lAdF1W0taAZ3FNhDQmExT2oIFsLKiQXEtzt7q843hddlaDdS2moe39IYVxo0_jUrryYurl_z5VlWFyXIKbc8B-82rZplXwy2LxdsjZcIIIe7FMypTap1S76mn7zZsXBc37hFJ3piUk-4_zmc9a8fYaDfYRXzt6Mk_pdmCtQFev0CDtmN_sGmVc6MeMXVq3IXokQ49z8eBPVV1NhxuTfQgjxE_WUQldPy52Fz1fIhMy4v4mUNuRZuPJeFnpNmodjvE-wDRh-auMPnn805zX7D55yYH95GmKdte76TYBrelrsWUSMVQ7aaNZu1VtGaUJMCS2X24Gp-DVSn7ISuBvMpqDG3rM3pq9oC2WgKongkalaIOQvmUv9gSaH7-FOkyngD7bq1Gk1MO08jf9WtRwBhi5thJdvQiZbyTW7bL52zAcEsZeifw4gV0KOKH1Djc5zIQ39-uv6v2otsUHLtY7BVE1HcUY59TZfgWMlTPlAqvJjn9zJ0sVQCwbmacKkghPEP3mRnwckUXnqAZfXarWtYna7qI_BmY6qlDN4Wrd0qlS5C5bLTJu6MvYyAQcfDOfBafcPcqmqN50goczzINPgcpabg1NXHlT5ks5Jslxju0cQkekhOeqd05KPvjHvGEr89Qf3BNlwTY2KQTQy_FbKBdPpPxymgtY6NTjPtrrsHJhA3xUYqYRvUoRa6DQWewv-QBQbTncty0?></g></svg>